# ConsultingG Real Estate API - Apache Configuration
# Route all API requests to index.php

RewriteEngine On
RewriteBase /backend/api/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.php [QSA,L]

# Handle preflight requests
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ index.php [L]

# Security - deny access to sensitive files
<FilesMatch "\.(env|ini|sql|md|json|lock|log|php~|bak)$">
    Require all denied
</FilesMatch>

# Deny access to vendor and other directories
<DirectoryMatch "/(vendor|config|models|controllers|middleware|utils|routes)/">
    Require all denied
</DirectoryMatch>

# PHP settings for shared hosting
<IfModule mod_php.c>
    php_value memory_limit 256M
    php_value max_execution_time 300
    php_value max_input_vars 3000
    php_value upload_max_filesize 16M
    php_value post_max_size 16M
    php_value display_errors Off
    php_value log_errors On
</IfModule>